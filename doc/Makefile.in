# ------------------------------------------------------------------------
# 	Makefile for manual page files 
# ------------------------------------------------------------------------

prefix =	@prefix@
mandir =	@mandir@
manndir =	$(mandir)/mann
srcdir =	@srcdir@
datadir =	@datadir@
datarootdir =	@datarootdir@
version =	@BLT_VERSION@

instdirs =	$(manndir) 

# GNU Make-specific macro
MAN_N =		$(patsubst $(srcdir)/%.rst,%.n,$(SRC)) 

SRC = 		BLT.rst \
		arcball.rst \
		background.rst \
		beep.rst \
		bgexec.rst \
		bitmap.rst \
		busy.rst \
		comboeditor.rst \
		combomenu.rst \
		compare.rst \
		cutbuffer.rst \
		datatable.rst \
		debug.rst \
		eps.rst \
		grab.rst \
		graph.rst \
		htext.rst \
		mesh.rst \
		paintbrush.rst \
		palette.rst \
		picture.rst \
		scrollset.rst \
		sftp.rst \
		spline.rst \
		table.rst \
		tabset.rst \
		timestamp.rst \
		tree.rst \
		treeview.rst \
		vector.rst \
		watch.rst \
		winop.rst

MISSING =	barchart.rst \
		combobutton.rst \
		comboentry.rst \
		combotree.rst \
		contour.rst \
		drawerset.rst \
		listview.rst \
		paneset.rst \
		tableview.rst \

MANPAGES =	$(MAN_N) 

INSTALL =	@INSTALL@
INSTALL_DATA =	@INSTALL_DATA@
SHELL =		/bin/sh
RM =		rm -rf
MKDIR_P =	@MKDIR_P@
VPATH =		$(srcdir)

all: $(MANPAGES)

install: all
	$(MKDIR_P) $(DESTDIR)$(manndir)
	for i in $(MAN_N) ; do \
		$(INSTALL_DATA) $$i $(DESTDIR)$(manndir); \
	done

.SUFFIXES: .n .rst

.rst.n: 
	$(MKDIR_P) man
	$(RM) man/$@
	rst2man.py $< > man/$@

.rst.pdf: 
	$(RM) pdf/$@
	rst2pdf $< -o pdf/$@

.rst.html: 
	$(RM) pdf/$@
	rst2html.py $< > html/$@

clean:
	$(RM) *.n

distclean: clean
	$(RM) $(srcdir)/*.bak $(srcdir)/*\~ $(srcdir)/"#"* Makefile

